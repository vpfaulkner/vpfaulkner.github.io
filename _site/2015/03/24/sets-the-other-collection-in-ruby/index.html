<!DOCTYPE html>
<html lang="en">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">

  <meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
  
  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Sets, The Other Collection in Ruby &middot; Wrong Abstraction
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="http://vpfaulkner.github.io/public/css/poole.css">
  <link rel="stylesheet" href="http://vpfaulkner.github.io/public/css/syntax.css">
  <link href='http://fonts.googleapis.com/css?family=Lora' rel='stylesheet'
  type='text/css'>

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://vpfaulkner.github.io/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="http://vpfaulkner.github.io/public/favicon.ico">
  <link rel="stylesheet" href="/public/font-awesome-4.3.0/css/font-awesome.min.css">

  <!-- RSS -->
  <link rel="alternate" type="application/atom+xml" title="Wrong Abstraction" href="http://vpfaulkner.github.io/atom.xml">
</head>


  <body>


    <div class="container content">
      <header class="masthead">
        <h3 class="masthead-title">
          <a href="http://vpfaulkner.github.io/" title="Home"><i class="fa
          fa-paper-plane"></i><span style="margin-left: .75rem">Wrong Abstraction</span></a>

          
             &nbsp;&nbsp;&nbsp;
             <small><a href="/about_me">About Me</a></small>
          
             &nbsp;&nbsp;&nbsp;
             <small><a href="/playbook">Playbook</a></small>
          
             &nbsp;&nbsp;&nbsp;
             <small><a href="/archive">Archive</a></small>
          

        </h3>
      </header>

      <main>
        <article class="post">
  <h1 class="post-title">Sets, The Other Collection in Ruby</h1>
  <time datetime="2015-03-24T00:00:00-04:00" class="page-date">24 Mar 2015</time>
  <p>Even if you’ve been using Ruby for a decent amount of time there is a good chance that you haven’t really played with Sets. We have embraced Arrays and Hashes so much that, when a use-case for Sets comes up, we often forget they are even an option and go straight to one of those two.</p>

<p>Sets in Ruby are based on the concept of a <a href="http://en.wikipedia.org/wiki/Set_(mathematics)">set in math</a> and are appropriate when you want to store a list of items, similar to that of an array, but only want to store unique items, similar to keys in a hash.</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s1">&#39;set&#39;</span>

<span class="n">set1</span> <span class="o">=</span> <span class="no">Set</span><span class="o">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="o">]</span>
<span class="c1">#=&gt; #&lt;Set: {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;}&gt;</span>
<span class="n">set1</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;d&#39;</span>
<span class="c1">#=&gt; #&lt;Set: {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;}&gt;</span>
<span class="n">set1</span> <span class="o">&lt;&lt;</span> <span class="s1">&#39;a&#39;</span>
<span class="c1">#=&gt; #&lt;Set: {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;}&gt;</span></code></pre></div>

<p>As you can see, adding an item feels just like an Array but a Set will not create duplicate items.</p>

<p>Sets also work well together allowing you to find the union, intersection, and more–just like you would in math class.</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">set2</span> <span class="o">=</span> <span class="no">Set</span><span class="o">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="o">]</span>
<span class="c1">#=&gt; #&lt;Set: {&quot;y&quot;, &quot;z&quot;, &quot;a&quot;}&gt;</span>
<span class="n">set1</span> <span class="o">||</span> <span class="n">set2</span>
<span class="c1">#=&gt; #&lt;Set: {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;}&gt;</span>
<span class="n">set1</span> <span class="o">&amp;</span> <span class="n">set2</span>
<span class="c1">#=&gt; #&lt;Set: {&quot;a&quot;}&gt;</span>
<span class="n">set1</span> <span class="o">-</span> <span class="n">set2</span>
<span class="c1">#=&gt; #&lt;Set: {&quot;b&quot;, &quot;c&quot;, &quot;d&quot;}&gt;</span></code></pre></div>

<p>So when would you use a set? I would recommend considering sets when you 1) don’t want duplicates, 2) order doesn’t matter, and 3) might want to compare two lists for equality (of items included–not order of items), intersections, etc.</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s1">&#39;set&#39;</span>

<span class="n">participating_organizations</span> <span class="o">=</span> <span class="no">Set</span><span class="o">.</span><span class="n">new</span>
<span class="n">employees</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">employee</span><span class="o">|</span>
  <span class="k">if</span> <span class="n">employee</span><span class="o">.</span><span class="n">participating</span>
    <span class="n">participating_organizations</span> <span class="o">&lt;&lt;</span> <span class="n">employee</span><span class="o">.</span><span class="n">organization</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></div>

<p>Here we consider an organization as participating if at least one employee is participating but don’t want to create duplicate organizations. Moreover, if we were to decide to have multiple participating organizations we could compare the two easily.</p>

<p>As you can see, Sets have several handy use-cases in Ruby but often get overlooked for an Array or Hash. Next time you find yourself in one of these use-cases, ask yourself if a Set would be a better fit.</p>

</article>

<aside class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="http://vpfaulkner.github.io//2015/03/23/the-inject-method-in-ruby/">
            The Inject Method in Ruby
            <small><time datetime="2015-03-23T00:00:00-04:00">23 Mar 2015</time></small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="http://vpfaulkner.github.io//2015/03/18/intro-to-redis/">
            Intro to Redis
            <small><time datetime="2015-03-18T00:00:00-04:00">18 Mar 2015</time></small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="http://vpfaulkner.github.io//2015/03/16/messages-before-objects/">
            Messages before Objects
            <small><time datetime="2015-03-16T00:00:00-04:00">16 Mar 2015</time></small>
          </a>
        </h3>
      </li>
    
  </ul>
</aside>

        

      </main>

      <footer class="footer">
        <small>
          &copy; <time datetime="2015-03-24T08:31:08-04:00">2015</time>. All rights reserved.
        </small>
      </footer>
    </div>

  </body>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-60674340-1', 'auto');
    ga('send', 'pageview');

</script>

</html>
