<!DOCTYPE html>
<html lang="en">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">

  <meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
  
  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Wrong Abstraction &middot; Ruby Developer
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="http://vpfaulkner.github.io/public/css/poole.css">
  <link rel="stylesheet" href="http://vpfaulkner.github.io/public/css/syntax.css">
  <link href='http://fonts.googleapis.com/css?family=Lora' rel='stylesheet'
  type='text/css'>

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://vpfaulkner.github.io/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="http://vpfaulkner.github.io/public/favicon.ico">
  <link rel="stylesheet" href="/public/font-awesome-4.3.0/css/font-awesome.min.css">

  <!-- RSS -->
  <link rel="alternate" type="application/atom+xml" title="Wrong Abstraction" href="http://vpfaulkner.github.io/atom.xml">
</head>


  <body>


    <div class="container content">
      <header class="masthead">
        <h3 class="masthead-title">
          <a href="http://vpfaulkner.github.io/" title="Home"><i class="fa
          fa-paper-plane"></i><span style="margin-left: .75rem">Wrong Abstraction</span></a>

          
             &nbsp;&nbsp;&nbsp;
             <small><a href="/about_me">About Me</a></small>
          
             &nbsp;&nbsp;&nbsp;
             <small><a href="/playbook">Playbook</a></small>
          
             &nbsp;&nbsp;&nbsp;
             <small><a href="/archive">Archive</a></small>
          

        </h3>
      </header>

      <main>
        <div class="posts">
  
  <article class="post">
    <h1 class="post-title">
      <a href="/2015/02/13/what-is-active-record/">
        What is Active Record?
      </a>
    </h1>

    <time datetime="2015-02-13T00:00:00-05:00" class="post-date">13 Feb 2015</time>

    <p>If you’re getting into Rails perhaps the most important concept to learn besides the MVC pattern is the role that Active Record plays.</p>

<p>For starters, it might be worth clarifying that active record can refer to both the general software architecture pattern first coined by Martin Fowler as well as the specific Rails implementation of that pattern. What that pattern hopes to do is essentially abstract the database allowing you as the software developer to interact with application objects (think User.last) rather than the database itself. This is done through Object-Relational Mapping and will make your life as a new Rails developer significantly easier. In addition to making your Rails app nearly database agnostic and allowing you to not build tedious database queries yourself, active record gives you the ability to:</p>

<ul>
  <li>Represent models and their data</li>
  <li>Represent associations between these models</li>
  <li>Validate models before they get persisted to the database</li>
  <li>Perform database operations in an object-oriented fashion.</li>
</ul>

<p>(taken from the official Rails guide, see below)</p>

<p>Let’s start with some examples.</p>

<p>Using a SQL database without active record, if you wanted to grab the first user in your User table you would have to build the query below:</p>

<div class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">clients</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">users</span><span class="p">.</span><span class="n">id</span> <span class="k">ASC</span> <span class="k">LIMIT</span> <span class="mi">1</span></code></pre></div>

<p>Not only do you have to know the right query syntax but you are suddenly very coupled to your database because its specific logic is sprinkled throughout your program. Furthermore, reading even a simple query such as this one is difficult and make it harder to communicate what you are doing in your program.</p>

<p>The same query using active record would look like this:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">user</span> <span class="o">=</span> <span class="no">User</span><span class="o">.</span><span class="n">first</span></code></pre></div>

<p>Much cleaner right? Not only are you as a beginner able to make relatively complex database queries without learning another language, but I also find that the active record pattern helps you write better object-oriented code. Some other examples:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># Find user with last name as &#39;Faulkner&#39;</span>
<span class="no">User</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="ss">last_name</span><span class="p">:</span> <span class="s1">&#39;Faulkner&#39;</span><span class="p">)</span>

<span class="c1"># Find user with last name as &#39;Faulkner&#39; and first name as &#39;Vance&#39;</span>
<span class="no">User</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="ss">last_name</span><span class="p">:</span> <span class="s1">&#39;Faulkner&#39;</span><span class="p">,</span> <span class="ss">first_name</span><span class="p">:</span> <span class="s1">&#39;Vance&#39;</span><span class="p">)</span>

<span class="c1"># Find non-member users and loop through block</span>
<span class="no">User</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="ss">member</span><span class="p">:</span> <span class="kp">false</span><span class="p">)</span><span class="o">.</span><span class="n">find_each</span> <span class="p">{</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span> <span class="o">.</span><span class="n">.</span><span class="o">.</span> <span class="p">}</span>

<span class="c1"># Retrieve member users by created_at date</span>
<span class="no">User</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="ss">member</span><span class="p">:</span> <span class="kp">true</span><span class="p">)</span><span class="o">.</span><span class="n">order</span><span class="p">(</span><span class="ss">:created_at</span><span class="p">)</span></code></pre></div>

<p>There are a multitude of ways to query active record which you can find with the <a href="http://guides.rubyonrails.org/active_record_querying.html">Rails guide</a>. Becoming comfortable with active record is essential as well as relatively easy and will set you up for becoming a productive rails developer. </p>


  </article>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="http://vpfaulkner.github.io/page11">Older</a>
  
  
    
      <a class="pagination-item newer" href="http://vpfaulkner.github.io/page9">Newer</a>
    
  
</div>

        

      </main>

      <footer class="footer">
        <small>
          &copy; <time datetime="2015-03-23T08:35:05-04:00">2015</time>. All rights reserved.
        </small>
      </footer>
    </div>

  </body>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-60674340-1', 'auto');
    ga('send', 'pageview');

</script>

</html>
