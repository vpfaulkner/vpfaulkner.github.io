<!DOCTYPE html>
<html lang="en">

    <div class="sidebar" id="sidebar">
  <div class="about_me">
    <h3>Vance Faulkner</h3>

    <p class="about_me_description">Vance is a Ruby on Rails developer from Durham, NC</p>
  </div>
</div>

  <head>
  <meta charset="UTF-8">
  <link href="http://gmpg.org/xfn/11" rel="profile">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Make your Ruby Objects Single-Minded &middot; Vance Faulkner
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link href='http://fonts.googleapis.com/css?family=Lora' rel='stylesheet'
  type='text/css'>

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/atom+xml" title="Vance Faulkner" href="/atom.xml">
</head>


  <body>


    <div class="container content">
      <header class="masthead">
        <h3 class="masthead-title">
          <a href="/" title="Home">Vance Faulkner</a>

          
             &nbsp;&nbsp;&nbsp;
             <small><a href="/about_me">About Me</a></small>
          
             &nbsp;&nbsp;&nbsp;
             <small><a href="/playbook">Playbook</a></small>
          
             &nbsp;&nbsp;&nbsp;
             <small><a href="/archive">Archive</a></small>
          

        </h3>
      </header>

      <main>
        <article class="post">
  <h1 class="post-title">Make your Ruby Objects Single-Minded</h1>
  <time datetime="2014-01-22T00:00:00-05:00" class="page-date">22 Jan 2014</time>
  <p>The easiest way I have found to ensure I am writing good object-oriented (OO)
code is to ask, “What should this object know and not know?” It makes the
objects a little more real and concrete for me, and forces me to write clean
and simple code because it is such an honest and simple question. </p>

<p>The <a href="http://en.wikipedia.org/wiki/Single_responsibility_principle">Single Responsibility
Principle</a> is a
fundamental idea in OO programming and should always be your first question when
you feel your code is starting to get out of hand. Take the following example:</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Checkout</span>

  <span class="k">def</span> <span class="nf">purchase</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
    <span class="n">item_price</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">price</span>
    <span class="n">tax</span> <span class="o">=</span> <span class="n">item_price</span> <span class="o">*</span> <span class="o">.</span><span class="mo">07</span>
    <span class="n">grand_total</span> <span class="o">=</span> <span class="n">item_price</span> <span class="o">+</span> <span class="n">tax</span> 
  <span class="k">end</span>

<span class="k">end</span></code></pre></div>

<p>Here I’ve tried to isolate that moment when your gut is starting to feel a
little so-so about the code because you are introducing something into the
Checkout logic that feels a little out of its domain: knowledge of how to
appropriate tax to the checkout. </p>

<p>Now this is a simple example where you might only care about local state tax, but
it is suddenly a leak in your airtight encapsulation of responsibility. What if
this logic suddenly has to accommodate multi-state purchases and know more than
one state tax rate? What if certain items are taxed at different rates? You can
see that trying to keep this logic in Checkout becomes a losing battle.</p>

<p>But the early signs of responsibility shift are not the difficult to see if you
are asking the right question. Should Checkout need to know about the taxing
rules for different states and different items? In any but the most
rudimentary, time-sensitive context, the answer should be no.</p>

</article>

<aside class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="//2014/01/21/private-methods-in-ruby/">
            Private Methods in Ruby
            <small><time datetime="2014-01-21T00:00:00-05:00">21 Jan 2014</time></small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="//2014/01/20/how-big-should-methods-be/">
            How Big Should Methods Be?
            <small><time datetime="2014-01-20T00:00:00-05:00">20 Jan 2014</time></small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="//2014/01/17/debugging-ruby-with-pry/">
            Debugging Ruby with Pry
            <small><time datetime="2014-01-17T00:00:00-05:00">17 Jan 2014</time></small>
          </a>
        </h3>
      </li>
    
  </ul>
</aside>

        
  <!-- Add Disqus comments. -->
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname = 'vancefaulkner'; // required: replace example with your forum shortname
    var disqus_identifier = "/2014/01/22/make-your-ruby-objects-single-minded/";

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


      </main>

      <footer class="footer">
        <small>
          &copy; <time datetime="2015-01-24T12:53:08-05:00">2015</time>. All rights reserved.
        </small>
      </footer>
    </div>

  </body>
</html>
